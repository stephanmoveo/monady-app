{"ast":null,"code":"var _jsxFileName = \"/Users/stephanbenchemoul/Documents/Projects/Moveo Skills Projects/monady-app/quickstart-react/src/components/video-js/VideoJS2.js\";\nimport React from \"react\";\nimport videojs from \"video.js\";\nimport \"video.js/dist/video-js.css\";\nimport \"./Video.css\";\nimport mondaySdk from \"monday-sdk-js\";\nconst monday = mondaySdk();\n\nString.prototype.replaceAll = function (search, replacement) {\n  var target = this;\n  return target.replace(new RegExp(search, \"g\"), replacement);\n};\n\nconst VideoJS2 = ({\n  src,\n  onReady,\n  itemId\n}) => {\n  const itemid = parseInt(itemId.itemId);\n  const [updatesNewArr, setupdatesNewArr] = React.useState([]);\n  let updatesArr = [];\n  let query = \"query { items (ids: [\" + itemid + \"]) { name, updates{assets{url}} }}\";\n  React.useEffect(() => {\n    monday.api(query).then(res => {\n      res.data.items[0].updates.forEach(update => {\n        if (update.assets.length > 0) {\n          update.assets.forEach(item => {\n            updatesArr.push(item.url);\n          });\n        }\n      });\n      setupdatesNewArr(updatesArr);\n    }).catch(res => console.log(res));\n  }, []);\n  const videoJsOptions = {\n    // lookup the options in the docs for more options\n    autoplay: true,\n    controls: true,\n    responsive: true,\n    fluid: true,\n    sources: [{\n      src: src // type: ‘video/mp4’\n\n    }]\n  };\n  const videoRef = React.useRef(null);\n  const playerRef = React.useRef(null);\n  React.useEffect(() => {\n    // make sure Video.js player is only initialized once\n    if (!playerRef.current) {\n      const videoElement = videoRef.current;\n      if (!videoElement) return;\n      const player = playerRef.current = videojs(videoElement, videoJsOptions, () => {\n        console.log(\"readyyyy\");\n        onReady && onReady(player);\n      });\n    } else {// you can update player here [update player through props]\n      // const player = playerRef.current;\n      // player.autoplay(options.autoplay);\n      // player.src(options.sources);\n    }\n  }, [videoJsOptions]); // Dispose the Video.js player when the functional component unmounts\n\n  React.useEffect(() => {\n    return () => {\n      if (playerRef.current) {\n        playerRef.current.dispose();\n        playerRef.current = null;\n      }\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-vjs-player\": true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    ref: videoRef,\n    className: \"video-js vjs-big-play-centered\",\n    controls: true,\n    preload: \"auto\",\n    width: \"640\",\n    height: \"268\",\n    \"data-setup\": \"{ \\\"playbackRates\\\": [0.5, 1, 1.5, 2, 4] }\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default VideoJS2;","map":{"version":3,"sources":["/Users/stephanbenchemoul/Documents/Projects/Moveo Skills Projects/monady-app/quickstart-react/src/components/video-js/VideoJS2.js"],"names":["React","videojs","mondaySdk","monday","String","prototype","replaceAll","search","replacement","target","replace","RegExp","VideoJS2","src","onReady","itemId","itemid","parseInt","updatesNewArr","setupdatesNewArr","useState","updatesArr","query","useEffect","api","then","res","data","items","updates","forEach","update","assets","length","item","push","url","catch","console","log","videoJsOptions","autoplay","controls","responsive","fluid","sources","videoRef","useRef","playerRef","current","videoElement","player","dispose"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport videojs from \"video.js\";\nimport \"video.js/dist/video-js.css\";\nimport \"./Video.css\";\nimport mondaySdk from \"monday-sdk-js\";\nconst monday = mondaySdk();\nString.prototype.replaceAll = function (search, replacement) {\n  var target = this;\n  return target.replace(new RegExp(search, \"g\"), replacement);\n};\n\nconst VideoJS2 = ({ src, onReady, itemId }) => {\n  const itemid = parseInt(itemId.itemId);\n  const [updatesNewArr, setupdatesNewArr] = React.useState([]);\n  let updatesArr = [];\n  let query =\n    \"query { items (ids: [\" + itemid + \"]) { name, updates{assets{url}} }}\";\n\n  React.useEffect(() => {\n    monday\n      .api(query)\n      .then((res) => {\n        res.data.items[0].updates.forEach((update) => {\n          if (update.assets.length > 0) {\n            update.assets.forEach((item) => {\n              updatesArr.push(item.url);\n            });\n          }\n        });\n        setupdatesNewArr(updatesArr);\n      })\n      .catch((res) => console.log(res));\n  }, []);\n\n  const videoJsOptions = {\n    // lookup the options in the docs for more options\n    autoplay: true,\n    controls: true,\n    responsive: true,\n    fluid: true,\n    sources: [\n      {\n        src: src,\n        // type: ‘video/mp4’\n      },\n    ],\n  };\n  const videoRef = React.useRef(null);\n  const playerRef = React.useRef(null);\n  React.useEffect(() => {\n    // make sure Video.js player is only initialized once\n    if (!playerRef.current) {\n      const videoElement = videoRef.current;\n      if (!videoElement) return;\n      const player = (playerRef.current = videojs(\n        videoElement,\n        videoJsOptions,\n        () => {\n          console.log(\"readyyyy\");\n          onReady && onReady(player);\n        }\n      ));\n    } else {\n      // you can update player here [update player through props]\n      // const player = playerRef.current;\n      // player.autoplay(options.autoplay);\n      // player.src(options.sources);\n    }\n  }, [videoJsOptions]);\n  // Dispose the Video.js player when the functional component unmounts\n  React.useEffect(() => {\n    return () => {\n      if (playerRef.current) {\n        playerRef.current.dispose();\n        playerRef.current = null;\n      }\n    };\n  }, []);\n  return (\n    <div data-vjs-player>\n      <video\n        ref={videoRef}\n        className=\"video-js vjs-big-play-centered\"\n        controls\n        preload=\"auto\"\n        width=\"640\"\n        height=\"268\"\n        data-setup='{ \"playbackRates\": [0.5, 1, 1.5, 2, 4] }'\n      />\n    </div>\n  );\n};\nexport default VideoJS2;\n"]},"metadata":{},"sourceType":"module"}