{"ast":null,"code":"var _jsxFileName = \"/Users/stephanbenchemoul/Documents/Projects/Moveo Skills Projects/monady-app/quickstart-react/src/components/video-js/VideoJS.js\";\nimport React from \"react\";\nimport \"./Video.css\";\nimport VideoJS2 from \"./VideoJS2\";\nimport mondaySdk from \"monday-sdk-js\";\nconst monday = mondaySdk();\nmonday.setToken(\"eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjEzMjA0MDgyMCwidWlkIjoyNDUzMjYzNywiaWFkIjoiMjAyMS0xMS0wOFQxMDozNTozOC44NjhaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTEwMjMyOCwicmduIjoidXNlMSJ9.f8Vjl4gHGNrCM1XHZV737XuzmDzLEsPCN_svrRHx1Zk\");\n\nString.prototype.replaceAll = function (search, replacement) {\n  var target = this;\n  return target.replace(new RegExp(search, \"g\"), replacement);\n};\n\nconst VideoJS = ({\n  contextData\n}) => {\n  const [userName, setUserName] = React.useState(\"\");\n  let temp = contextData.data.user.id;\n  React.useEffect(() => {\n    monday.api(\"query { users(ids: [\" + temp + \"]) { name }}\").then(res => {\n      setUserName(res.data.users[0].name);\n      console.log(res);\n    }).catch(res => console.log(res));\n  }, []);\n  const itemid = contextData.data.itemId;\n  const [updatesNewArr, setupdatesNewArr] = React.useState([]);\n  const extensionsArr = [\"mp4\", \"mov\", \"webm\", \"ogv\", \"avi\", \"wmv\", \"mkv\"];\n\n  const isCompatibale = url => {\n    if (url !== \"mov\") return false;\n    return true;\n  };\n\n  let updatesArr = [];\n  let query = \"query { items (ids: [\" + itemid + \"]) { name, updates{assets{url}} }}\";\n  React.useEffect(() => {\n    monday.api(query).then(res => {\n      res.data.items[0].updates.forEach(update => {\n        if (update.assets.length > 0) {\n          update.assets.forEach(item => {\n            if (isCompatibale(item.url.split(\".\").pop())) {\n              updatesArr.push(item.url);\n            } // updatesArr.push(item.url);\n\n          });\n        }\n      });\n      setupdatesNewArr(updatesArr);\n    }).catch(res => console.log(res));\n  }, []);\n  const playerRef = React.useRef(null);\n\n  const handlePlayerReady = player => {\n    playerRef.current = player;\n  };\n\n  return updatesNewArr.length > 0 && userName !== \"\" ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, updatesNewArr.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"movie-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, item.split(\"/\").pop().replaceAll(\"%20\", \" \")), /*#__PURE__*/React.createElement(VideoJS2, {\n      userName: userName,\n      src: item,\n      index: index,\n      onReady: handlePlayerReady,\n      itemid: itemid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }));\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nexport default VideoJS;","map":{"version":3,"sources":["/Users/stephanbenchemoul/Documents/Projects/Moveo Skills Projects/monady-app/quickstart-react/src/components/video-js/VideoJS.js"],"names":["React","VideoJS2","mondaySdk","monday","setToken","String","prototype","replaceAll","search","replacement","target","replace","RegExp","VideoJS","contextData","userName","setUserName","useState","temp","data","user","id","useEffect","api","then","res","users","name","console","log","catch","itemid","itemId","updatesNewArr","setupdatesNewArr","extensionsArr","isCompatibale","url","updatesArr","query","items","updates","forEach","update","assets","length","item","split","pop","push","playerRef","useRef","handlePlayerReady","player","current","map","index"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Video.css\";\nimport VideoJS2 from \"./VideoJS2\";\nimport mondaySdk from \"monday-sdk-js\";\nconst monday = mondaySdk();\nmonday.setToken(\n  \"eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjEzMjA0MDgyMCwidWlkIjoyNDUzMjYzNywiaWFkIjoiMjAyMS0xMS0wOFQxMDozNTozOC44NjhaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTEwMjMyOCwicmduIjoidXNlMSJ9.f8Vjl4gHGNrCM1XHZV737XuzmDzLEsPCN_svrRHx1Zk\"\n);\nString.prototype.replaceAll = function (search, replacement) {\n  var target = this;\n  return target.replace(new RegExp(search, \"g\"), replacement);\n};\nconst VideoJS = ({ contextData }) => {\n  const [userName, setUserName] = React.useState(\"\");\n  let temp = contextData.data.user.id;\n  React.useEffect(() => {\n    monday\n      .api(\"query { users(ids: [\" + temp + \"]) { name }}\")\n      .then((res) => {\n        setUserName(res.data.users[0].name);\n        console.log(res);\n      })\n      .catch((res) => console.log(res));\n  }, []);\n\n  const itemid = contextData.data.itemId;\n  const [updatesNewArr, setupdatesNewArr] = React.useState([]);\n  const extensionsArr = [\"mp4\", \"mov\", \"webm\", \"ogv\", \"avi\", \"wmv\", \"mkv\"];\n  const isCompatibale = (url) => {\n   \n    if (url !== \"mov\") return false;\n    return true;\n  };\n  let updatesArr = [];\n  let query =\n    \"query { items (ids: [\" + itemid + \"]) { name, updates{assets{url}} }}\";\n\n  React.useEffect(() => {\n    monday\n      .api(query)\n      .then((res) => {\n        res.data.items[0].updates.forEach((update) => {\n          if (update.assets.length > 0) {\n            update.assets.forEach((item) => {\n              if (isCompatibale(item.url.split(\".\").pop())) {\n                updatesArr.push(item.url);\n              }\n              // updatesArr.push(item.url);\n            });\n          }\n        });\n        setupdatesNewArr(updatesArr);\n      })\n      .catch((res) => console.log(res));\n  }, []);\n\n  const playerRef = React.useRef(null);\n  const handlePlayerReady = (player) => {\n    playerRef.current = player;\n  };\n\n  return updatesNewArr.length > 0 && userName !== \"\" ? (\n    <div className=\"video-container\">\n      {updatesNewArr.map((item, index) => {\n        return (\n          <div key={index}>\n            <div className=\"movie-text\">\n              {item.split(\"/\").pop().replaceAll(\"%20\", \" \")}\n            </div>\n            <VideoJS2\n              userName={userName}\n              src={item}\n              index={index}\n              onReady={handlePlayerReady}\n              itemid={itemid}\n            />\n          </div>\n        );\n      })}\n    </div>\n  ) : (\n    <></>\n  );\n};\n\nexport default VideoJS;\n"]},"metadata":{},"sourceType":"module"}